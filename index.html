<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>夏夜唤灵簿</title>
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body>
    <!-- 这是所有游戏视图将被渲染的主容器 -->
    <div id="app-container"></div>

    <!-- 音频元素放在这里，以便AudioManager可以全局访问 -->
    <audio id="bgm-player" loop></audio>
    <audio id="sfx-hover-player"></audio>
    <audio id="sfx-click-player"></audio>
    <audio id="sfx-title-hover-player"></audio>
    <audio id="sfx-title-click-player"></audio>
    <audio id="sfx-sys-yes-player"></audio>


    <!-- 我们应用程序脚本的唯一入口点 -->
    <script type="module" src="./js/main.js"></script>
</body>
    <script>
  // 按你的仓库名设置
  const basePath = "/Summoning-of-Summer-Ghosts.github.io/";

  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register(basePath + 'sw.js', { scope: basePath })
        .then(reg => {
          // 新 SW 准备就绪时，自动跳过等待并接管页面（可选）
          if (navigator.serviceWorker.controller) {
            navigator.serviceWorker.controller.postMessage({ type: 'SKIP_WAITING' });
          } else {
            // 首次安装没有 controller，等激活后再刷新一次
            setTimeout(() => location.reload(), 800);
          }
          console.log('SW registered', reg.scope);
        })
        .catch(err => console.error('SW register failed:', err));
    });
  }
</script>

</html>
